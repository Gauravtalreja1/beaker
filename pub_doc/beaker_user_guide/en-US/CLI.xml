<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "beaker_user_guide.ent">
%BOOK_ENTITIES;
]>
<chapter id="chap-beaker_user_guide-CLI">
<title>Beaker client</title>
<para>
The shell based client provides users with mostly a subset of what is possible via the UI, although it does provide one or two things which the UI does not provide. 
To install beaker-client:
	<screen>
$ <userinput>yum install beaker-client</userinput>
	</screen>
</para>
<para>
You will need to edit Beaker's configuration file, <literal>~/.beaker_client/config</literal>. You will need to set the value -f <literal>HUB_URL</literal> to that of your Beaker server:
	<screen>
HUB_URL = "<replaceable>beaker_server_fully_qualified_domain_name</replaceable>"
	</screen>
</para>
<para>
You'll then need to configure how your Beaker client authenticates with the Beaker server. You can use either password authentication, or kerberos authentication. For password add the following:
	<screen>
AUTH_METHOD = "password"
USERNAME = "<replaceable>username</replaceable>"
PASSWORD = "<replaceable>password</replaceable>"
	</screen>
</para>
<para>
If instead kerberos authentication is preferred:
	<screen>
AUTH_METHOD = "krbv"
KRB_REALM = "<replaceable>krb_realm</replaceable>"
	</screen>
</para>
<para>
To verify it is working properly:
	<screen>
$ <userinput>bkr list-labcontrollers</userinput>
	</screen>
It should return a list of labcontrollers configured in Beaker.
</para>
<para>To create a simple Job workflow, the beaker client comes with the command <literal>bkr workflow-simple</literal>. This simple Job workflow will create the XML for you from various options passed in a the shell prompt, and submit this to the Beaker server. To see all the options that can be passed to the <literal>workflow-simple</literal>, use the following command:
	<screen>
$ <userinput>bkr workflow-simple --help</userinput>
	</screen>
</para>

<para>To submit an existing Job workflow:
	<screen>
<userinput>bkr job-submit <replaceable>job_xml</replaceable></userinput>
	</screen>
If succesful, you will be shown the <literal>Job ID</literal> and the progress of your Job.
</para>
<para>To watch a Job:
	<screen>
$ <userinput>bkr job-watch J:<replaceable>job_id</replaceable></userinput>
	</screen>
</para>

<para>To cancel a Job you have created:
	<screen>
$ <userinput>bkr job-cancel J:<replaceable>job_id</replaceable></userinput>
	</screen>
</para>

<para>To show all Tasks available for a given distro:
	<screen>
$ <userinput>bkr task-list <replaceable>distro</replaceable></userinput>
	</screen>
</para>

<para>To add a Task:
	<screen>
$ <userinput>bkr task-add <replaceable>task_rpm</replaceable></userinput>
	</screen>
</para>
</chapter>
