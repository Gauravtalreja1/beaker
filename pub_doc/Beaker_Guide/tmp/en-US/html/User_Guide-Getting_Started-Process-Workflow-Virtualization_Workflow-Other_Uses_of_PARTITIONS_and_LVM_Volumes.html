<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>3.2.1.3.2.3. Other Uses of PARTITIONS and LVM Volumes</title><link rel="stylesheet" href="Common_Content/css/default.css" type="text/css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta name="generator" content="publican 2.5" /><meta name="package" content="Beaker-Deployment_Guide-0.5-en-US-1-9" /><link rel="home" href="index.html" title="Deployment Guide" /><link rel="up" href="User_Guide-Getting_Started-Process-Workflow-Virtualization_Workflow.html" title="3.2.1.3.2. Virtualization Workflow" /><link rel="prev" href="ch03s02s01s03s02s02.html" title="3.2.1.3.2.2. Making More Sense of LVM and PARTITION based Guest Installations" /><link rel="next" href="User_Guide-Getting_Started-Process-Workflow-Virtualization_Workflow-Dynamic_Partitioning-IVM.html" title="3.2.1.3.2.4. Dynamic Partitioning/IVM" /></head><body><p id="title"><a class="left" href="https://fedorahosted.org/publican"><img src="Common_Content/images/image_left.png" alt="Product Site" /></a><a class="right" href="https://fedorahosted.org/publican"><img src="Common_Content/images/image_right.png" alt="Documentation Site" /></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="ch03s02s01s03s02s02.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="User_Guide-Getting_Started-Process-Workflow-Virtualization_Workflow-Dynamic_Partitioning-IVM.html"><strong>Next</strong></a></li></ul><div class="section" id="User_Guide-Getting_Started-Process-Workflow-Virtualization_Workflow-Other_Uses_of_PARTITIONS_and_LVM_Volumes"><div class="titlepage"><div><div><h6 class="title" id="User_Guide-Getting_Started-Process-Workflow-Virtualization_Workflow-Other_Uses_of_PARTITIONS_and_LVM_Volumes">3.2.1.3.2.3. Other Uses of PARTITIONS and LVM Volumes</h6></div></div></div><div class="para">
			In virtualization testing, block devices can be used for other purposes than installing a guest on them. It's possible to have block devices attached to or detached from a guest. If you'd like to do this operation in your tests, you can either pass the information about the partitions you have created as environment variable to your test, or you can use the blockdevice utility, which is another test that lives in /distribution/utils/blockdevice .This testcase just creates a text file containing information about the block devices and manages them. Its commands are:
		</div><div class="para">
			<span class="application"><strong>getdevice</strong></span> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
						Usage: getdevice &lt;lvm|partition&gt; &lt;minimum size in GB&gt;
					</div></li><li class="listitem"><div class="para">
						Description: returns a free device that has enough space
					</div></li><li class="listitem"><div class="para">
						Returns: string with device name and return code 0 on success, error string and return code 1 on failure
					</div></li></ul></div>

		</div><div class="para">
			<span class="application"><strong>freedevice </strong></span> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
						Usage: freedevice &lt;devicename&gt;
					</div></li><li class="listitem"><div class="para">
						Descriptions: Marks the device can free so it can be reused.
					</div></li><li class="listitem"><div class="para">
						Returns: return code zero on success or error string and return code 1 on failure.
					</div></li></ul></div>

		</div><div class="para">
			When running blockdevice test-util, you need to provide testing an environmental variable named BLOCKDB_ARGS, telling the test what partitions/lvms you have intended to be used in test script. The format of <code class="code">$BLOCKDB_ARGS</code> is name:type:size:fs;name:type:size:fs; for each block device. For example suppose you have these partitions in your job:
		</div><pre class="screen">
     &lt;partition&gt;
        &lt;type&gt;part&lt;/type&gt;
        &lt;name&gt;/mnt/block1&lt;/name&gt;
        &lt;size&gt;1&lt;/size&gt; &lt;!-- 1 gig --&gt;
     &lt;/partition&gt;
    &lt;partition&gt;
        &lt;type&gt;lvm&lt;/type&gt;
        &lt;name&gt;mylvm&lt;/name&gt;
        &lt;size&gt;5&lt;/size&gt;
     &lt;/partition&gt;
    &lt;partition&gt;
        &lt;type&gt;part&lt;/type&gt;
        &lt;name&gt;/mnt/block4ext4&lt;/name&gt;
        &lt;size&gt;1&lt;/size&gt; &lt;!-- 1 gig --&gt;
        &lt;fs&gt;ext4dev&lt;/fs&gt;
     &lt;/partition&gt;
    &lt;partition&gt;
        &lt;type&gt;lvm&lt;/type&gt;
        &lt;name&gt;mylvm4ext4&lt;/name&gt;
        &lt;size&gt;5&lt;/size&gt;
        &lt;fs&gt;ext4dev&lt;/fs&gt;
     &lt;/partition&gt;</pre><div class="para">
			then BLOCKDB_ARGS would be: /mnt/block1:part:1;mylvm:lvm:5;/mnt/block4ext4:part:1:ext4dev;mylvm4ext4:lvm:5:ext4dev
		</div><div class="para">
			If you utilize blockdevices test, you should ensure that: 
			<div class="itemizedlist"><ul><li class="listitem"><div class="para">
						blockdevice is called before any of your scripts
					</div></li><li class="listitem"><div class="para">
						freedevice must be called after the testing on the space is done.
					</div></li></ul></div>

		</div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="ch03s02s01s03s02s02.html"><strong>Prev</strong>3.2.1.3.2.2. Making More Sense of LVM and PARTITI...</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="User_Guide-Getting_Started-Process-Workflow-Virtualization_Workflow-Dynamic_Partitioning-IVM.html"><strong>Next</strong>3.2.1.3.2.4. Dynamic Partitioning/IVM</a></li></ul></body></html>
