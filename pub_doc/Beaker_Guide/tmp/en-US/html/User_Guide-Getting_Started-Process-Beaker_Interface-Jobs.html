<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>3.2.1.1.1.6. Jobs</title><link rel="stylesheet" href="Common_Content/css/default.css" type="text/css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta name="generator" content="publican 2.5" /><meta name="package" content="Beaker-Deployment_Guide-0.5-en-US-1-9" /><link rel="home" href="index.html" title="Deployment Guide" /><link rel="up" href="User_Guide-Getting_Started-Process-Beaker_Interface-Systems.html" title="3.2.1.1.1. Systems" /><link rel="prev" href="User_Guide-Getting_Started-Process-Beaker_Interface-Distros.html" title="3.2.1.1.1.5. Distros" /><link rel="next" href="User_Guide-Getting_Started-Process-Beaker_Interface-Recipes.html" title="3.2.1.1.2. Recipes" /></head><body><p id="title"><a class="left" href="https://fedorahosted.org/publican"><img src="Common_Content/images/image_left.png" alt="Product Site" /></a><a class="right" href="https://fedorahosted.org/publican"><img src="Common_Content/images/image_right.png" alt="Documentation Site" /></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="User_Guide-Getting_Started-Process-Beaker_Interface-Distros.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="User_Guide-Getting_Started-Process-Beaker_Interface-Recipes.html"><strong>Next</strong></a></li></ul><div class="section" id="User_Guide-Getting_Started-Process-Beaker_Interface-Jobs"><div class="titlepage"><div><div><h6 class="title" id="User_Guide-Getting_Started-Process-Beaker_Interface-Jobs">3.2.1.1.1.6. Jobs</h6></div></div></div><div class="para">
				The purpose of a Job is to provide an encapsulation of Tasks. It is to provide a single point of submission of these Tasks, and a single point of reviewing the output and results of these Tasks. The Tasks within a Job may or may not be related to each other; although it would make sense to define Jobs based on the relationship of the Tasks within it. Once a Job has been submitted you can not alter its contents, or pause it. You can however cancel it (Section 5.3.3.4, “Job Results”), and alter its Recipe Set's priorities (you can only lower the priority level if you are not in the admin group). Adjusting this priority upwards will change which Recipe Set is run sooner, and vice a versa.
			</div><div class="section" id="User_Guide-Getting_Started-Process-Beaker_Interface-Jobs-Job_Workflow"><div class="titlepage"><div><div><h6 class="title" id="User_Guide-Getting_Started-Process-Beaker_Interface-Jobs-Job_Workflow">3.2.1.1.1.6.1. Job Workflow</h6></div></div></div><div class="para">
					To create a simple Job workflow, see the <span class="application"><strong>bkr workflow-simpl</strong></span> command in Chapter 2, Beaker client
				</div></div><div class="section" id="User_Guide-Getting_Started-Process-Beaker_Interface-Jobs-Job_Searching"><div class="titlepage"><div><div><h6 class="title" id="User_Guide-Getting_Started-Process-Beaker_Interface-Jobs-Job_Searching">3.2.1.1.1.6.2. Job Searching</h6></div></div></div><div class="para">
					To search for a Job, navigate to <span class="application"><strong>Scheduler&gt;Jobs</strong></span> at the top of the page. To look up the <span class="application"><strong>Job ID</strong></span>, enter a number in the search box and press the <span class="application"><strong>Lookup ID button</strong></span>. Please see Section 5.1.1, “System Searching” for details on searching.
				</div><div class="note"><div class="admonition_header"><h2>Quick Searches</h2></div><div class="admonition"><div class="para">
						By pressing the <span class="application"><strong>Running,Queued</strong></span>, or <span class="application"><strong>Completed</strong></span> buttons you can quickly display Recipes that have a status of running,queued, and completed respectively.
					</div></div></div></div><div class="section" id="User_Guide-Getting_Started-Process-Beaker_Interface-Jobs-Job_Submission"><div class="titlepage"><div><div><h6 class="title" id="User_Guide-Getting_Started-Process-Beaker_Interface-Jobs-Job_Submission">3.2.1.1.1.6.3. Job Submission</h6></div></div></div><div class="para">
					There are two ways of submitting a Job through the web app.They are outlined below.
				</div><div class="section" id="User_Guide-Getting_Started-Process-Beaker_Interface-Jobs-Job_Submission-Submitting_a_New_Job"><div class="titlepage"><div><div><h6 class="title" id="User_Guide-Getting_Started-Process-Beaker_Interface-Jobs-Job_Submission-Submitting_a_New_Job">3.2.1.1.1.6.3.1. Submitting a New Job</h6></div></div></div><div class="para">
						Once you have created an XML Job workflow, you able able to submit it as a new Job. To do this, go to the<span class="application"><strong>Scheduler &gt; New Job</strong></span>. Click <span class="application"><strong>Browse</strong></span> to select your XML file, and then hit the<span class="application"><strong> Submit Data</strong></span> button. The next page shown gives you an opportunity to check/edit your XML before queueing it as a Job by pressing the <span class="application"><strong>Queue </strong></span>button.
					</div></div><div class="section" id="User_Guide-Getting_Started-Process-Beaker_Interface-Jobs-Job_Submission-Cloning_an_Existing_Job"><div class="titlepage"><div><div><h6 class="title" id="User_Guide-Getting_Started-Process-Beaker_Interface-Jobs-Job_Submission-Cloning_an_Existing_Job">3.2.1.1.1.6.3.2. Cloning an existing Job</h6></div></div></div><div class="para">
						Cloning a Job means to take a Job that has already been run on the System, and re-submit it. To do this you first need to be on the Job search page. See Section 5.3.2, “Job Searching”.
					</div><div class="mediaobject"><img src="./images/job_submit_clone.png" width="444" /><div class="caption">Cloning a Job</div></div><div class="para">
						Clicking on <span class="application"><strong>Clone</strong></span> under the Action column will take you to a page that shows the structure of the Job in the XML.
					</div><div class="note"><div class="admonition_header"><h2>Submitting a slightly different Job</h2></div><div class="admonition"><div class="para">
							If you want to submit a Job that's very similar to a Job already in Beaker,you can use the Clone button to change details of a previous Job and resubmit it!
						</div></div></div></div><div class="section" id="User_Guide-Getting_Started-Process-Beaker_Interface-Jobs-Job_Submission-Job_workflow_details"><div class="titlepage"><div><div><h6 class="title" id="User_Guide-Getting_Started-Process-Beaker_Interface-Jobs-Job_Submission-Job_workflow_details">3.2.1.1.1.6.3.3. Job workflow details</h6></div></div></div><div class="para">
						There are various XML entities in a Job workflow. You may wish to look at what some of these may be by looking at <a class="xref" href="User_Guide-Getting_Started-Process-Beaker_Interface-Jobs.html#User_Guide-Getting_Started-Process-Beaker_Interface-Jobs-Job_Submission-Cloning_an_Existing_Job">Section 3.2.1.1.1.6.3.2, “Cloning an existing Job”</a>Each Job has a root node called the <span class="application"><strong>job</strong></span> element: 
<pre class="screen">&lt;job&gt;
&lt;/job&gt;
</pre>

					</div><div class="para">
						A direct child is the <span class="application"><strong>whiteboard</strong></span>. The content is normally a mnemonic piece of text describing the Job:
					</div><pre class="screen">&lt;job&gt;
&lt;whiteboard&gt;
        Apache 2.2 test
&lt;/whiteboard&gt;
&lt;/ob&gt;
</pre><div class="para">
						The next tag in the <span class="application"><strong>recipeSet</strong></span> tag (which describes a Recipe Set. See Section 5.4, “Recipes” for details). A Job workflow can have one or more<span class="application"><strong>recipeSet</strong></span>. All Recipes within a Recipe Set are run simultaneously, whereas multiple Recipe Sets are run in no predetermined order. This should help you decide whether you wish to run tasks in one or many Recipe Set (i.e Multihost tests will require no more than one Recipe Set).
					</div><pre class="screen">&lt;job&gt;
  &lt;whiteboard&gt;
    Apache 2.2 test
  &lt;/whiteboard&gt;
    &lt;recipeset&gt;
    &lt;/recipeset&gt;
&lt;/job&gt;
</pre><div class="para">
						Of course a <span class="application"><strong>recipeSet</strong></span> element needs one or more recipe children. As mentioned above, <span class="application"><strong>Recipes</strong></span> run simultaneously. The <span class="application"><strong>recipeSet</strong></span> element can have the following attributes 
						<div class="itemizedlist"><ul><li class="listitem"><div class="para">
									<span class="application"><strong>kernel_options</strong></span>
								</div></li><li class="listitem"><div class="para">
									<span class="application"><strong>kernel_options_post</strong></span>
								</div></li><li class="listitem"><div class="para">
									<span class="application"><strong>ks_meta</strong></span>
								</div></li><li class="listitem"><div class="para">
									<span class="application"><strong>role</strong></span>In a Multihost environment, it could be either <span class="application"><strong>SERVERS</strong></span>, <span class="application"><strong>CLIENT</strong></span> or <span class="application"><strong>STANDALONE</strong></span>. If it is not important, it can be <span class="application"><strong>None</strong></span>.
								</div></li><li class="listitem"><div class="para">
									<span class="application"><strong>whiteboard</strong></span>Text that describes the Recipe
								</div></li></ul></div>

					</div><div class="para">
						Here is an example: 
<pre class="screen">&lt;job&gt;
  &lt;whiteboard&gt;
    Apache 2.2 test
  &lt;/whiteboard&gt;
    &lt;recipeset&gt;
      &lt;ecipe kernel_options="" kernel_options_post="" ks_meta="" role="None" whiteboard="Lab Controller"&gt;
      &lt;/recipe&gt;
    &lt;/recipeset&gt;
&lt;/job&gt;
</pre>

					</div><div class="note"><div class="admonition_header"><h2>Avoid having many Recipes in one Recipe Set</h2></div><div class="admonition"><div class="para">
							Because Recipes are run simultaneously, not one Recipe will commence until all other sibling Recipes are ready. This involves each Recipe reserving a machine, and waiting until every other Recipe has reserved a machine. This can tie up resources and keep them idle for long amounts of time. Try having many Recipe Sets containing few Recipes, rather than the opposite. Of course this only applies to Recipes that do not need to be run simultaneously (i.e not Multihost Jobs)
						</div></div></div><div class="para">
						Within the <span class="application"><strong>recipe</strong></span> tag, you can specify what packages need to be installed on top of anything that comes installed by default.
					</div><pre class="screen">&lt;job&gt;
  &lt;whiteboard&gt;
    Apache 2.2 test
  &lt;/whiteboard&gt;
    &lt;recipeSet&gt;
      &lt;recipe kernel_options="" kernel_options_post="" ks_meta="" role="None" whiteboard="Lab Controller"&gt;
        &lt;packages&gt;
          &lt;package name="emacs"/&gt;
          &lt;package name="vim-enhanced"/&gt;
          &lt;package name="unifdef"/&gt;
          &lt;package name="mysql-server"/&gt;
          &lt;package name="MySQL-python"/&gt;
          &lt;package name="python-twill"/&gt;
                        &lt;/packages&gt;
      &lt;/recipe&gt;
    &lt;/recipeSet&gt;
&lt;/job&gt;
</pre><div class="para">
						If you would like you can also specify your own repository that provides extra packages that your Job requires. Use the <span class="application"><strong>repo</strong></span> tag for this. You can use any text you like for the name attribute.
					</div><pre class="screen">&lt;job&gt;
 &lt;whiteboard&gt;
    Apache 2.2 test
  &lt;/whiteboard&gt;
    &lt;recipeSet&gt;
      &lt;recipe kernel_options="" kernel_options_post="" ks_meta="" role="None" whiteboard="Lab Controller"&gt;
        &lt;packages&gt;
         &lt;package name="emacs"/&gt;
          &lt;package name="vim-enhanced"/&gt;
          &lt;package name="unifdef"/&gt;
          &lt;package name="mysql-server"/&gt;
          &lt;package name="MySQL-python"/&gt;
          &lt;package name="python-twill"/&gt;
        &lt;/packages&gt;

        &lt;repos&gt;
          &lt;repo name="myrepo_1" url="http://my-repo.com/tools/beaker/devel/"/&gt;
        &lt;/repos&gt;

      &lt;/recipe&gt;
    &lt;/recipeSet&gt;
&lt;/job&gt;
</pre><div class="para">
						To actually determine what distro will be installed, the <span class="application"><strong>distroRequires</strong></span> element needs to be populated. Within, we can specify such elements as<span class="application"><strong> distro_arch, distro_name</strong></span> and <span class="application"><strong>distro_method</strong></span>. This relates to the Distro architecture, the name of the Distro, and it's install method (i.e nfs,ftp etc) respectively. The <span class="application"><strong>op</strong></span> determines if we do or do not want this value i.e = means we do want that value, != means we do not want that value. The <span class="application"><strong>distro_virt</strong></span> element will determine whether we install on a virtual machine or not.
					</div><pre class="screen">&lt;job&gt;
  &lt;whiteboard&gt;
    Apache 2.2 test
  &lt;/whiteboard&gt;
    &lt;recipeSet&gt;
      &lt;recipe kernel_options="" kernel_options_post="" ks_meta="" role="None" whiteboard="Lab Controller"&gt;
        &lt;packages&gt;
          &lt;package name="emacs"/&gt;
          &lt;package name="vim-enhanced"/&gt;
          &lt;package name="unifdef"/&gt;
          &lt;package name="mysql-server"/&gt;
          &lt;package name="MySQL-python"/&gt;
          &lt;package name="python-twill"/&gt;
        &lt;/packages&gt;

        &lt;repos&gt;
          &lt;repo name="myrepo_1" url="http://my-repo.com/tools/beaker/devel/"/&gt;
        &lt;/repos&gt;
        &lt;distroRequires&gt;
          &lt;and&gt;
            &lt;distro_arch op="=" value="x86_64"/&gt;
            &lt;distro_name op="=" value="RHEL5-Server-U4"/&gt;
            &lt;distro_method op="=" value="nfs"/&gt;
          &lt;/and&gt;
          &lt;distro_virt op="=" value=""/&gt;
        &lt;/distroRequires&gt;
      &lt;/recipe&gt;
    &lt;/recipeSet&gt;
&lt;/job&gt;
</pre><div class="para">
						<span class="application"><strong>hostRequires</strong></span> has similar attributes to <span class="application"><strong>distroRequires</strong></span>
					</div><pre class="screen">&lt;job&gt;
  &lt;whiteboard&gt;
    Apache 2.2 test
  &lt;/whiteboard&gt;
    &lt;recipeSet&gt;
      &lt;recipe kernel_options="" kernel_options_post="" ks_meta="" role="None" whiteboard="Lab Controller"&gt;
        &lt;packages&gt;
           &lt;package name="emacs"/&gt;
          &lt;package name="vim-enhanced"/&gt;
          &lt;package name="unifdef"/&gt;
          &lt;package name="mysql-server"/&gt;
          &lt;package name="MySQL-python"/&gt;
          &lt;package name="python-twill"/&gt;
        &lt;/packages&gt;
        &lt;repos&gt;
          &lt;repo name="myrepo_1" url="http://my-repo.com/tools/beaker/devel/"/&gt;
        &lt;/repos&gt;
        &lt;distroRequires&gt;
          &lt;and&gt;

            &lt;distro_arch op="=" value="x86_64"/&gt;
            &lt;distro_name op="=" value="RHEL5-Server-U4"/&gt;
            &lt;distro_method op="=" value="nfs"/&gt;
          &lt;/and&gt;
          &lt;distro_virt op="=" value=""/&gt;
        &lt;/distroRequires&gt;
        &lt;hostRequires&gt;
          &lt;and&gt;
            &lt;arch op="=" value="x86_64"/&gt;
          &lt;/and&gt;
        &lt;/hostRequires&gt;
      &lt;/recipe&gt;
    &lt;/recipeSet&gt;
&lt;/job&gt;
</pre><div class="para">
						All that's left to populate our XML with, are the<span class="application"><strong> task </strong></span> elements. The two attributes we need to specify are the <span class="application"><strong>name</strong></span> and the <span class="application"><strong>role</strong></span>. Details of how to find which Task's are available, see Section 5.5.2, “Task Searching”. Also note that we've added in a <span class="application"><strong>param</strong></span> as a descendant of <span class="application"><strong>task</strong></span>. The <span class="application"><strong>value</strong></span> of this will be assigned to a new environment variable specified by<span class="application"><strong> name.</strong></span>
					</div><pre class="screen">&lt;job&gt;
  &lt;whiteboard&gt;
    Apache 2.2 test
  &lt;/whiteboard&gt;
    &lt;recipeSet&gt;
      &lt;recipe kernel_options="" kernel_options_post="" ks_meta="" role="None" whiteboard="Lab Controller"&gt;
        &lt;packages&gt;
          &lt;package name="emacs"/&gt;
          &lt;package name="vim-enhanced"/&gt;
          &lt;package name="unifdef"/&gt;
          &lt;package name="mysql-server"/&gt;
          &lt;package name="MySQL-python"/&gt;
          &lt;package name="python-twill"/&gt;
        &lt;/packages&gt;

        &lt;repos&gt;
          &lt;repo name="myrepo_1" url="http://my-repo.com/tools/beaker/devel/"/&gt;
        &lt;/repos&gt;
        &lt;distroRequires&gt;
          &lt;and&gt;
            &lt;distro_arch op="=" value="x86_64"/&gt;
            &lt;distro_name op="=" value="RHEL5-Server-U4"/&gt;
            &lt;distro_method op="=" value="nfs"/&gt;
          &lt;/and&gt;
          &lt;distro_virt op="=" value=""/&gt;
        &lt;/distroRequires&gt;

        &lt;task name="/distribution/install" role="STANDALONE"&gt;
          &lt;params&gt;
                &lt;param name="My_ENV_VAR" value="foo"/&gt;
           &lt;/params&gt;
         &lt;/task&gt;

      &lt;/recipe&gt;
    &lt;/recipeSet&gt;
&lt;/job&gt;
</pre></div><div class="section" id="User_Guide-Getting_Started-Process-Beaker_Interface-Jobs-Job_Submission-Job_Results"><div class="titlepage"><div><div><h6 class="title" id="User_Guide-Getting_Started-Process-Beaker_Interface-Jobs-Job_Submission-Job_Results">3.2.1.1.1.6.3.4. Job Results</h6></div></div></div><div class="para">
						The whole purpose of Jobs is to view the output of the Job, and more to the point, Tasks that ran within the Job. To do this, you must first go to the Job search screen (Section 5.3.2, “Job Searching”). After finding the Job you want to see the results of, click on the link in the <span class="application"><strong>ID</strong></span> column.You don't have to wait until the Job has completed to view the results. Of course only the results of those Tasks that have already finished running will be available.
					</div><div class="para">
						The Job results page is divided by<span class="application"><strong> Recipe Set</strong></span>. To show the results of each Recipe within these Recipe Sets, click the <span class="application"><strong>Show All Results</strong></span> button. You can just show the tasks that have a status of <span class="application"><strong>Fail</strong></span> by clicking <span class="application"><strong>Show Failed Results</strong></span>.
					</div><div class="para">
						While your Job is still <span class="application"><strong>Queued</strong></span> it's possible to change the priority. You can change the priority of individual Recipe Sets by changing the value of <span class="application"><strong>Priority</strong></span>, or you can change all the Job's Recipe Sets at once by clicking an option beside the text <span class="application"><strong>Set all RecipeSet priorities</strong></span>, which is at the top right of the page. If successful, a green success message will briefly display, otherwise a red error message will be shown.
					</div><div class="note"><div class="admonition_header"><h2>Priority permissions</h2></div><div class="admonition"><div class="para">
							If you are not an Admin you will only be able to lower the priority. Admins can lower and raise the priority
						</div></div></div><div class="mediaobject"><img src="./images/job_priority_change.png" width="444" /><div class="caption">Changing the priority of a Job's Recipe Set</div></div><div class="para">
						<span class="application"><strong>Result Details</strong></span> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
									<span class="application"><strong>Run</strong></span> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
												This is the <span class="application"><strong>ID</strong></span> of the instance of the particular Task.
											</div></li></ul></div>

								</div></li><li class="listitem"><div class="para">
									<span class="application"><strong>Task</strong></span> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
												A Task which is part of our current Job.
											</div></li></ul></div>

								</div></li><li class="listitem"><div class="para">
									<span class="application"><strong>Start</strong></span> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
												The time at which the Task commenced.
											</div></li></ul></div>

								</div></li><li class="listitem"><div class="para">
									<span class="application"><strong>Finish</strong></span> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
												The time at which the Task completed.
											</div></li></ul></div>

								</div></li><li class="listitem"><div class="para">
									<span class="application"><strong>Duration</strong></span> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
												Time the Task took to run.
											</div></li></ul></div>

								</div></li><li class="listitem"><div class="para">
									<span class="application"><strong>Logs</strong></span> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
												This is a listing of all the output logs generated during the running of this Task.
											</div></li></ul></div>

								</div></li><li class="listitem"><div class="para">
									<span class="application"><strong>Status</strong></span> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
												This is the current Status of the Task. <span class="application"><strong>Aborted</strong></span>,<span class="application"><strong>Cancelled</strong></span> and <span class="application"><strong>Completed</strong></span> mean that the Task has finished running.
											</div></li></ul></div>

								</div></li><li class="listitem"><div class="para">
									<span class="application"><strong>Action</strong></span> <div class="itemizedlist"><ul><li class="listitem"><div class="para">
												The two options here are Cancel and Clone.See Section 5.3.3.2, “Cloning an existing Job” to learn about Cloning.
											</div></li></ul></div>

								</div></li></ul></div>

					</div><div class="note"><div class="admonition_header"><h2>Viewing Job results at a glance </h2></div><div class="admonition"><div class="para">
							If you would to be able to look at the Result of all Tasks within a particular Job, try the Matrix Report, See Section 5.6.1, “Matrix Report”.
						</div></div></div></div></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="User_Guide-Getting_Started-Process-Beaker_Interface-Distros.html"><strong>Prev</strong>3.2.1.1.1.5. Distros</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="User_Guide-Getting_Started-Process-Beaker_Interface-Recipes.html"><strong>Next</strong>3.2.1.1.2. Recipes</a></li></ul></body></html>
