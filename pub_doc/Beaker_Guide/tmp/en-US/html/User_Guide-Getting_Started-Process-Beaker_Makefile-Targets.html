<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>3.2.1.2.8. Targets</title><link rel="stylesheet" href="Common_Content/css/default.css" type="text/css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta name="generator" content="publican 2.5" /><meta name="package" content="Beaker-Deployment_Guide-0.5-en-US-1-9" /><link rel="home" href="index.html" title="Deployment Guide" /><link rel="up" href="User_Guide-Getting_Started-Process-Beaker_Makefile.html" title="3.2.1.2. Beaker Makefile" /><link rel="prev" href="User_Guide-Getting_Started-Process-Beaker_Makefile-FILES_METADATA.html" title="3.2.1.2.7. FILES=$(METADATA)" /><link rel="next" href="User_Guide-Getting_Started-Process-Beaker_Makefile-MATADATA.html" title="3.2.1.2.9. $(METADATA)" /></head><body><p id="title"><a class="left" href="https://fedorahosted.org/publican"><img src="Common_Content/images/image_left.png" alt="Product Site" /></a><a class="right" href="https://fedorahosted.org/publican"><img src="Common_Content/images/image_right.png" alt="Documentation Site" /></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="User_Guide-Getting_Started-Process-Beaker_Makefile-FILES_METADATA.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="User_Guide-Getting_Started-Process-Beaker_Makefile-MATADATA.html"><strong>Next</strong></a></li></ul><div class="section" id="User_Guide-Getting_Started-Process-Beaker_Makefile-Targets"><div class="titlepage"><div><div><h5 class="title" id="User_Guide-Getting_Started-Process-Beaker_Makefile-Targets">3.2.1.2.8. Targets</h5></div></div></div><div class="para">
			Each test must supply a run target which allows an implementation of the framework to invoke <span class="application"><strong>make run</strong></span>. It is usually best to have this as the first target defined in the <span class="application"><strong>Makefile</strong></span> so that a simple invocation of<span class="application"><strong> make</strong></span> will use it as the default, and run the test. Note how the <span class="application"><strong>build</strong></span> target is set up as a dependency of run to ensure that this happens if necessary.
		</div><div class="para">
			Additional targets and variables supplied by the include for<span class="application"><strong> /usr/share/beaker/lib/beaker-make.include</strong></span>. This file is supplied with<span class="application"><strong> beaker-devel</strong></span> as seen below.
		</div><pre class="screen">[root@dhcp83-5 example-compilation]# cat /usr/share/rhts/lib/rhts-make.include
# Copyright (c) 2006  All rights reserved. This copyrighted material l
# is made available to anyone wishing to use, modify, copy, or
# redistribute it subject to the terms and conditions of the GNU General
# Public License v.2.
#
# This program is distributed in the hope that it will be useful, but WITHOUT AN Y
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE. See the GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
#
# Author: Your Name &lt;name@company.com&gt;

#
# rhts-make.include
#
# default rules and settings for rhts makefiles
#

# Common Variables.
TEST_DIR=/mnt/tests$(TEST)
INSTALL_DIR=$(DEST)$(TEST_DIR)
METADATA=testinfo.desc

# tag: mark the test source as a release

tag:
        rhts-mk-tag-release

release: tag

# prep: prepare the test(s) for packaging

install: $(FILES) runtest.sh testinfo.desc
        mkdir -p $(INSTALL_DIR)
        cp -a $(FILES) Makefile $(INSTALL_DIR)
        install -m 0755 runtest.sh $(INSTALL_DIR)

# package: build the test package

package:
        rhts-mk-build-package


# submit: submit the test package to RHTS

submit:
        rhts-mk-build-package -s $(TESTSERVER)

##################################################
# example makefile
#
# include ~/devel/rhts/greg/rhts_nb/make.include
#
# FILES=prog1.c prog2.c
#
# ARENA=$(DEST)/mnt/tests/glibc/double-free-exploit
#
# install:
#       mkdir -p $(ARENA)
#       cp -a runtest.sh $(FILES) $(ARENA)
#
# run: tests
#       runtest.sh
#
# tests: prog2 prog2</pre><div class="para">
			The <span class="application"><strong>tag</strong></span> target is used to tag a package in anticipation of submitting it to a test lab.
		</div><div class="para">
			The <span class="application"><strong>submit</strong></span> target is used to submit a package to a test lab and requires the <span class="application"><strong>TESTSERVER</strong></span> variable to be defined. It builds an<span class="application"><strong> RPM</strong></span> of the test (if necessary) and uploads the test package to a test lab controller where it can be used to schedule tests.
		</div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="User_Guide-Getting_Started-Process-Beaker_Makefile-FILES_METADATA.html"><strong>Prev</strong>3.2.1.2.7. FILES=$(METADATA)</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="User_Guide-Getting_Started-Process-Beaker_Makefile-MATADATA.html"><strong>Next</strong>3.2.1.2.9. $(METADATA)</a></li></ul></body></html>
